| {% load static %}
doctype html
html
  head
    title Today
    link(rel="stylesheet" href="{% static 'kettles/assignment.css' %}" type="text/css" media="screen,projection")
  body
    h1 Today
    p Today: {{todays_date}}
    p Today's Production Date: {{todays_production_day}}
    div(style="width:25%;float:left;")
      p Today's Products:
      | {% for product in todays_products.products %}
      h5.product {{product.itemNumber}}
      | {% endfor %}
    div(style="width:74%;float:right;")
      p Today's Kettles:
        | {% for k in todays_production_day.kettles.all|dictsort:"kettle_number" %}
        p.kettle-number {{k.kettle_number}}
        .kettle
          | {% if k.products %}
          ul
            | {% for product in k.products %}
            li {{product}}
            | {% endfor %}
          | {% endif %}
        | {% endfor %}
        
    script(type="text/javascript" src="{% static 'js/jquery.js'%}")
    script(type="text/javascript" src="{% static 'js/jqueryui.js'%}")
    script.
      $('.product').draggable({
        cursor:'move',
        helper: 'clone',
        classes: {
          "ui-draggable": "dragging-product"
        },
        //- delay:350,
        //- connectToSortable: '.sortable',
        //- start: handleDragStart,
        //- stop: handleProductDrop,
      });
      
      $('.kettle').droppable({
        drop:handleCellDrop,
      })
      
      function handleProductDrop(event, ui){
        var droppedProduct = $(event.target)
        //- droppedProduct.addClass('assigned')
      }
      
      function handleCellDrop(event, ui){
        var productToDrop = $(ui.draggable);
        productToDrop.addClass('assigned')
        var kettleToDropOn = $(event.target).find('.kettle-number').text();
        //- console.log(kettleToDropOn)
      }
